<section class="content">

  <!-- HEADER -->
  <section class="content-header">
      <div>
          <h1>Transactions</h1>
          <p>View and manage all your transactions</p>
      </div>

      <div class="content-actions">
          <button class="ghost-button" (click)="setDateFilter('month')">ðŸ“… This Month</button>
          <button class="primary-button" (click)="openAddTransactionModal()">âž• Add</button>
          <button class="ghost-button" (click)="toggleView()">
            {{ currentView === 'grid' ? 'ðŸ“… Calendar View' : 'ðŸ“‹ Grid View' }}
          </button>
      </div>
  </section>

  <!-- FILTERS -->
  <section class="content-card filters">
      <select [(ngModel)]="filters.type">
          <option value="">All Types</option>
          <option value="income">Income</option>
          <option value="expense">Expense</option>
          <option value="transfer">Transfer</option>
      </select>

      <select [(ngModel)]="filters.account">
          <option value="">All Accounts</option>
          <option *ngFor="let acc of accounts" [value]="acc.id">{{ acc.name }}</option>
      </select>

      <select [(ngModel)]="filters.category">
          <option value="">All Categories</option>
          <option *ngFor="let cat of categories" [value]="cat.id">{{ cat.name }}</option>
      </select>

      <input type="date" [(ngModel)]="filters.startDate">
      <input type="date" [(ngModel)]="filters.endDate">

      <button class="primary-button" (click)="applyFilters()">Apply</button>
  </section>

  <!-- MAIN CONTENT -->
  <section class="content-card transaction-view">

      <!-- GRID VIEW -->
      <div *ngIf="currentView === 'grid'">
          <table class="transaction-grid">
              <thead>
                  <tr>
                      <th>Date</th>
                      <th>Type</th>
                      <th>Category</th>
                      <th>Account</th>
                      <th>Amount</th>
                      <th>Note</th>
                  </tr>
              </thead>
              <tbody>
                  <tr *ngFor="let t of transactions">
                      <td>{{ t.date | date:'shortDate' }}</td>
                      <td>{{ t.type | titlecase }}</td>
                      <td>{{ t.category?.name }}</td>
                      <td>{{ t.account?.name }}</td>
                      <td [ngClass]="t.type">{{ t.type === 'expense' ? '-' : '+' }} à§³ {{ t.amount }}</td>
                      <td>{{ t.note }}</td>
                  </tr>
              </tbody>
          </table>
      </div>

      <!-- CALENDAR VIEW -->
      <div *ngIf="currentView === 'calendar'">
          <app-calendar-component [transactions]="transactions" />
      </div>

  </section>
</section>
